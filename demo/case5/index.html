<!DOCTYPE html>
<html>
  <body>
    This is an example-prototype that shows how to import html code
    <router2-content src="external.html"></router2-content>
  </body>
  <script>
    window.addEventListener('load', e => {
      var element = document.querySelector('router2-content');
      var src = element.getAttribute('src');

      function pseudoImportHTML(url) {
        fetch(src).then(response => {
          return response.text();
        }).then(text => {
          element.innerHTML = text;

          var scripts = element.querySelectorAll('script');
          var i, l = scripts.length;
          for (var i = 0; i < scripts.length; i++) {
            var old_script = scripts[i];
            var new_script = document.createElement('script');

            // clone text (content)
            if (old_script.src) {
              new_script.src = old_script.src;
            } else if (old_script.text) {
              new_script.text = old_script.text;
            }

            // clone all attributes
            for (var j = 0; j < old_script.attributes.length; j++) {
              new_script.setAttribute(old_script.attributes[j].name, old_script.attributes[j].value);
            }

            // je-je-je
            var parent = old_script.parentNode;
            parent.replaceChild(new_script, old_script);
          }
        });
      }

      pseudoImportHTML(src);

    });
  </script>
</html>
